

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>5.7. Reducing CPU Usage with Orbbec ROS Package &mdash; OrbbecSDK V2 ROS1 Wrapper  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=a2eacb60" />

  
    <link rel="shortcut icon" href="../../_static/orbbec_footerlogo_3d_world.svg"/>
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="5.9. Using Multiple Cameras with the Orbbec ROS Package" href="multi_camera.html" />
    <link rel="prev" title="5.6. Using interleave_ae with Gemini330 series cameras" href="interleave_ae_mode.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            OrbbecSDK V2 ROS1 Wrapper
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../1_overview/overview.html">1. Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../1_overview/introduction.html">1.1. Introduction</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../1_overview/introduction.html#support-hardware-products">1.1.1. Support Hardware Products</a></li>
<li class="toctree-l3"><a class="reference internal" href="../1_overview/introduction.html#support-platforms">1.1.2. Support Platforms</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../1_overview/orbbecsdk_overview.html">1.2. Orbbec SDK Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../1_overview/orbbecsdk_overview.html#terms">1.2.1. Terms</a></li>
<li class="toctree-l3"><a class="reference internal" href="../1_overview/orbbecsdk_overview.html#orbbec-sdk-v2-architecture-overview">1.2.2. Orbbec SDK v2 Architecture Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../1_overview/orbbecsdk_overview.html#sdk-concept-overview">1.2.3. SDK Concept Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../1_overview/orbbecsdk_overview.html#sdk-programming-model">1.2.4. SDK Programming Model</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../2_installation/installation.html">2. Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../2_installation/build_the_package.html">2.1. Build from Source</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../2_installation/build_the_package.html#environment">2.1.1. Environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../2_installation/build_the_package.html#create-ros-workspace-and-build">2.1.2. Create ROS Workspace and Build</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../2_installation/registration_script.html">2.2. Registration script (required)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../3_quickstarts/quickstarts.html">3. Quickstarts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../3_quickstarts/quickstart.html">3.1. QuickStarts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../3_quickstarts/quickstart.html#introduction">3.1.1. Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../3_quickstarts/quickstart.html#build-your-first-camera-application">3.1.2. Build your First Camera Application</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../3_quickstarts/quickstart.html#step-1-source-ros-1-and-workspace">3.1.2.1. Step 1: Source ROS 1 and Workspace</a></li>
<li class="toctree-l4"><a class="reference internal" href="../3_quickstarts/quickstart.html#step-2-launch-the-camera-node">3.1.2.2. Step 2: Launch the Camera Node</a></li>
<li class="toctree-l4"><a class="reference internal" href="../3_quickstarts/quickstart.html#step-3-visualize-in-rviz">3.1.2.3. Step 3: Visualize in RViz</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../3_quickstarts/quickstart.html#sample-features">3.1.3. Sample Features</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../3_quickstarts/quickstart.html#list-available-topics-services-parameters">3.1.3.1. List available topics / services / parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../3_quickstarts/quickstart.html#echo-a-topic">3.1.3.2. Echo a topic</a></li>
<li class="toctree-l4"><a class="reference internal" href="../3_quickstarts/quickstart.html#call-a-service">3.1.3.3. Call a service</a></li>
<li class="toctree-l4"><a class="reference internal" href="../3_quickstarts/quickstart.html#record-with-rosbag">3.1.3.4. Record with rosbag</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../4_application_guide/application_guide.html">4. Application Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../4_application_guide/launch_parameters.html">4.1. Launch parameters</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../4_application_guide/launch_parameters.html#core-stream-configuration">4.1.1. Core &amp; Stream Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../4_application_guide/launch_parameters.html#sensor-controls">4.1.2. Sensor Controls</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../4_application_guide/launch_parameters.html#color-stream">4.1.2.1. Color Stream</a></li>
<li class="toctree-l4"><a class="reference internal" href="../4_application_guide/launch_parameters.html#depth-stream">4.1.2.2. Depth Stream</a></li>
<li class="toctree-l4"><a class="reference internal" href="../4_application_guide/launch_parameters.html#ir-stream">4.1.2.3. IR Stream</a></li>
<li class="toctree-l4"><a class="reference internal" href="../4_application_guide/launch_parameters.html#laser-ldp">4.1.2.4. Laser / LDP</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../4_application_guide/launch_parameters.html#device-sync-advanced-features">4.1.3. Device, Sync &amp; Advanced Features</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../4_application_guide/launch_parameters.html#multi-camera-synchronization">4.1.3.1. Multi-Camera Synchronization</a></li>
<li class="toctree-l4"><a class="reference internal" href="../4_application_guide/launch_parameters.html#network-cameras">4.1.3.2. Network Cameras</a></li>
<li class="toctree-l4"><a class="reference internal" href="../4_application_guide/launch_parameters.html#device-specific">4.1.3.3. Device-Specific</a></li>
<li class="toctree-l4"><a class="reference internal" href="../4_application_guide/launch_parameters.html#disparity">4.1.3.4. Disparity</a></li>
<li class="toctree-l4"><a class="reference internal" href="../4_application_guide/launch_parameters.html#interleave-ae-mode">4.1.3.5. Interleave AE Mode</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../4_application_guide/launch_parameters.html#basic-general-parameters">4.1.4. Basic &amp; General Parameters</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../4_application_guide/launch_parameters.html#firmware-backend">4.1.4.1. Firmware &amp; Backend</a></li>
<li class="toctree-l4"><a class="reference internal" href="../4_application_guide/launch_parameters.html#tf-extrinsics-calibration">4.1.4.2. TF, Extrinsics &amp; Calibration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../4_application_guide/launch_parameters.html#time-synchronization">4.1.4.3. Time Synchronization</a></li>
<li class="toctree-l4"><a class="reference internal" href="../4_application_guide/launch_parameters.html#logging-diagnostics">4.1.4.4. Logging &amp; Diagnostics</a></li>
<li class="toctree-l4"><a class="reference internal" href="../4_application_guide/launch_parameters.html#miscellaneous">4.1.4.5. Miscellaneous</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../4_application_guide/launch_parameters.html#imu">4.1.5. IMU</a></li>
<li class="toctree-l3"><a class="reference internal" href="../4_application_guide/launch_parameters.html#depth-filters">4.1.6. Depth Filters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../4_application_guide/launch_parameters.html#summary-of-differences-between-ros1-and-ros2-parameters">4.1.7. Summary of Differences between ROS1 and ROS2 Parameters</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../4_application_guide/launch_parameters.html#major-new-parameters-in-ros2">4.1.7.1. 1. Major New Parameters in ROS2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../4_application_guide/launch_parameters.html#parameter-renaming-and-standardization">4.1.7.2. 2. Parameter Renaming and Standardization</a></li>
<li class="toctree-l4"><a class="reference internal" href="../4_application_guide/launch_parameters.html#structural-and-detail-differences">4.1.7.3. 3. Structural and Detail Differences</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../4_application_guide/services.html">4.2. All available services for camera control</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../4_application_guide/services.html#stream-control">4.2.1. Stream Control</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../4_application_guide/services.html#color-stream">4.2.1.1. Color Stream</a></li>
<li class="toctree-l4"><a class="reference internal" href="../4_application_guide/services.html#depth-stream">4.2.1.2. Depth Stream</a></li>
<li class="toctree-l4"><a class="reference internal" href="../4_application_guide/services.html#ir-stream">4.2.1.3. IR Stream</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../4_application_guide/services.html#sensor-emitter-control">4.2.2. Sensor &amp; Emitter Control</a></li>
<li class="toctree-l3"><a class="reference internal" href="../4_application_guide/services.html#device-information-management">4.2.3. Device Information &amp; Management</a></li>
<li class="toctree-l3"><a class="reference internal" href="../4_application_guide/services.html#synchronization">4.2.4. Synchronization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../4_application_guide/services.html#depth-filter-configuration">4.2.5. Depth Filter Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../4_application_guide/services.html#data-capture-calibration-management">4.2.6. Data Capture &amp; Calibration Management</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../4_application_guide/topics.html">4.3. Available Topics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../4_application_guide/topics.html#image-streams">4.3.1. Image Streams</a></li>
<li class="toctree-l3"><a class="reference internal" href="../4_application_guide/topics.html#point-cloud-topics">4.3.2. Point Cloud Topics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../4_application_guide/topics.html#device-status-diagnostics">4.3.3. Device Status &amp; Diagnostics</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="advanced_guide.html">5. Advanced Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="align_depth_color.html">5.1. Aligning Depth to Color in ROS</a><ul>
<li class="toctree-l3"><a class="reference internal" href="align_depth_color.html#commands-to-align-and-view-depth-and-color-images">5.1.1. Commands to Align and View Depth and Color Images</a></li>
<li class="toctree-l3"><a class="reference internal" href="align_depth_color.html#selecting-topics-in-rviz">5.1.2. Selecting Topics in RViz</a></li>
<li class="toctree-l3"><a class="reference internal" href="align_depth_color.html#example-of-depth-to-color-overlay">5.1.3. Example of Depth to Color Overlay</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="building_a_Debian_Package.html">5.2. Building a Debian Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration_of_depth_NFOV_and_WFOV_modes.html">5.3. Configuration of depth NFOV and WFOV modes</a></li>
<li class="toctree-l2"><a class="reference internal" href="depth_work_mode_switch.html">5.4. Depth work mode switch</a></li>
<li class="toctree-l2"><a class="reference internal" href="disparity_search_offset.html">5.5. Disparity_search_offset</a><ul>
<li class="toctree-l3"><a class="reference internal" href="disparity_search_offset.html#function-introduction">5.5.1. Function Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="disparity_search_offset.html#parameter-introduction">5.5.2. Parameter Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="disparity_search_offset.html#run-the-launch">5.5.3. Run the launch</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="interleave_ae_mode.html">5.6. Using interleave_ae with Gemini330 series cameras</a><ul>
<li class="toctree-l3"><a class="reference internal" href="interleave_ae_mode.html#parameter-introduction">5.6.1. Parameter Introduction</a><ul>
<li class="toctree-l4"><a class="reference internal" href="interleave_ae_mode.html#interleave-hdr">5.6.1.1. interleave hdr</a></li>
<li class="toctree-l4"><a class="reference internal" href="interleave_ae_mode.html#interleave-laser">5.6.1.2. interleave laser</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="interleave_ae_mode.html#run-the-launch">5.6.2. Run the launch</a><ul>
<li class="toctree-l4"><a class="reference internal" href="interleave_ae_mode.html#example-visualization">5.6.2.1. Example Visualization</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="interleave_ae_mode.html#multi-camera-synced-interleave-ae">5.6.3. Multi_camera_synced + Interleave_ae</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">5.7. Reducing CPU Usage with Orbbec ROS Package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#recommended-settings-for-lower-cpu-usage">5.7.1. Recommended Settings for Lower CPU Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="#launch-files-used-for-testing">5.7.2. Launch Files Used for Testing</a></li>
<li class="toctree-l3"><a class="reference internal" href="#test-environment">5.7.3. Test environment</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#hardware-configuration">5.7.3.1. Hardware Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ros-configuration">5.7.3.2. ROS Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#camera-setup">5.7.3.3. Camera Setup</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#test-setup">5.7.4. Test Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="#test-results">5.7.5. Test Results</a></li>
<li class="toctree-l3"><a class="reference internal" href="#uvc-backend-comparison-rgb-format">5.7.6. uvc_backend Comparison (RGB format)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#color-format-comparison-mjpg-vs-rgb">5.7.7. color_format Comparison (MJPG vs RGB)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#filter-configuration-impact">5.7.8. Filter Configuration Impact</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#further-optimization">5.8. Further Optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="multi_camera.html">5.9. Using Multiple Cameras with the Orbbec ROS Package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="multi_camera.html#prerequisites">5.9.1. Prerequisites</a></li>
<li class="toctree-l3"><a class="reference internal" href="multi_camera.html#increase-usbfs-memory-mb-value-critical-step">5.9.2. Increase usbfs_memory_mb Value (CRITICAL STEP)</a></li>
<li class="toctree-l3"><a class="reference internal" href="multi_camera.html#identifying-camera-usb-ports">5.9.3. Identifying Camera USB Ports</a><ul>
<li class="toctree-l4"><a class="reference internal" href="multi_camera.html#script-to-list-connected-cameras">5.9.3.1. Script to List Connected Cameras</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="multi_camera.html#launching-multiple-cameras">5.9.4. Launching Multiple Cameras</a><ul>
<li class="toctree-l4"><a class="reference internal" href="multi_camera.html#setup-for-multiple-camera-launch">5.9.4.1. Setup for Multiple Camera Launch</a></li>
<li class="toctree-l4"><a class="reference internal" href="multi_camera.html#running-the-launch-file">5.9.4.2. Running the Launch File</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="multi_camera.html#configuring-the-tf-tree-for-multiple-cameras">5.9.5. Configuring the TF Tree for Multiple Cameras</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="multi_camera_nodelet.html">5.10. Configuring Multiple Cameras with Orbbec ROS Package (Nodelet)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="multi_camera_nodelet.html#configuring-the-nodelet-manager">5.10.1. Configuring the Nodelet Manager</a></li>
<li class="toctree-l3"><a class="reference internal" href="multi_camera_nodelet.html#configuring-camera-nodelets">5.10.2. Configuring Camera Nodelets</a><ul>
<li class="toctree-l4"><a class="reference internal" href="multi_camera_nodelet.html#running-the-launch-file">5.10.2.1. Running the Launch File</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="multi_camera_nodelet.html#configuring-camera-parameters">5.10.3. Configuring Camera Parameters</a><ul>
<li class="toctree-l4"><a class="reference internal" href="multi_camera_nodelet.html#identical-parameters-for-all-cameras">5.10.3.1. Identical Parameters for All Cameras</a></li>
<li class="toctree-l4"><a class="reference internal" href="multi_camera_nodelet.html#different-parameters-for-each-camera">5.10.3.2. Different Parameters for Each Camera</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="multi_camera_synced.html">5.11. Multi_camera synced Instructions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="multi_camera_synced.html#setup-instructions">5.11.1. Setup instructions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="multi_camera_synced.html#checking-camera-port-with-orbbecsdk-ros1">5.11.1.1. Checking camera port with OrbbecSDK_ROS1</a></li>
<li class="toctree-l4"><a class="reference internal" href="multi_camera_synced.html#orbbecsdk-ros1-multi-camera-synced-configuration">5.11.1.2. OrbbecSDK_ROS1 multi-camera synced configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="multi_camera_synced.html#run-the-following-command-to-start-the-multi-camera-synced">5.11.1.3. Run the following command to start the multi-camera synced</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="net_camera.html">5.12. Net_camera</a><ul>
<li class="toctree-l3"><a class="reference internal" href="net_camera.html#femto-mega">5.12.1. Femto Mega</a><ul>
<li class="toctree-l4"><a class="reference internal" href="net_camera.html#parameter-introduction">5.12.1.1. Parameter Introduction</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="net_camera.html#single-net-camera">5.12.2. Single Net camera</a><ul>
<li class="toctree-l4"><a class="reference internal" href="net_camera.html#automatically-enumerate-network-devices">5.12.2.1. automatically enumerate network devices:</a></li>
<li class="toctree-l4"><a class="reference internal" href="net_camera.html#specify-ip-address-to-start-the-device">5.12.2.2. Specify IP address to start the device:</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="net_camera.html#gemini-335le">5.12.3. Gemini 335Le</a></li>
<li class="toctree-l3"><a class="reference internal" href="net_camera.html#id1">5.12.4. Single Net camera</a><ul>
<li class="toctree-l4"><a class="reference internal" href="net_camera.html#id2">5.12.4.1. automatically enumerate network devices:</a></li>
<li class="toctree-l4"><a class="reference internal" href="net_camera.html#id3">5.12.4.2. Specify IP address to start the device:</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="net_camera.html#multi-net-camera">5.12.5. Multi Net camera</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="point_cloud.html">5.13. nabling and Visualizing Point Cloud in ROS 1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="point_cloud.html#enabling-depth-point-cloud">5.13.1. Enabling Depth Point Cloud</a><ul>
<li class="toctree-l4"><a class="reference internal" href="point_cloud.html#command-to-enable-depth-point-cloud">5.13.1.1. Command to Enable Depth Point Cloud</a></li>
<li class="toctree-l4"><a class="reference internal" href="point_cloud.html#visualizing-depth-point-cloud-in-rviz">5.13.1.2. Visualizing Depth Point Cloud in RViz</a><ul>
<li class="toctree-l5"><a class="reference internal" href="point_cloud.html#example-visualization">5.13.1.2.1. Example Visualization</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="point_cloud.html#enabling-colored-point-cloud">5.13.2. Enabling Colored Point Cloud</a><ul>
<li class="toctree-l4"><a class="reference internal" href="point_cloud.html#command-to-enable-colored-point-cloud">5.13.2.1. Command to Enable Colored Point Cloud</a></li>
<li class="toctree-l4"><a class="reference internal" href="point_cloud.html#visualizing-colored-point-cloud-in-rviz">5.13.2.2. Visualizing Colored Point Cloud in RViz</a><ul>
<li class="toctree-l5"><a class="reference internal" href="point_cloud.html#id1">5.13.2.2.1. Example Visualization</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="predefined_presets.html">5.14. Predefined presets</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../6_FAQ/FAQ.html">6. Frequently Asked Questions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../6_FAQ/FAQ.html#unexpected-crash">6.1. Unexpected Crash</a></li>
<li class="toctree-l2"><a class="reference internal" href="../6_FAQ/FAQ.html#no-data-stream-from-multiple-cameras">6.2. No Data Stream from Multiple Cameras</a></li>
<li class="toctree-l2"><a class="reference internal" href="../6_FAQ/FAQ.html#compilation-failure-due-to-opencv-version-issues">6.3. Compilation Failure Due to OpenCV Version Issues</a></li>
<li class="toctree-l2"><a class="reference internal" href="../6_FAQ/FAQ.html#additional-troubleshooting">6.4. Additional Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../6_FAQ/FAQ.html#why-are-there-so-many-launch-files">6.5. Why Are There So Many Launch Files?</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">OrbbecSDK V2 ROS1 Wrapper</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="advanced_guide.html"><span class="section-number">5. </span>Advanced Guide</a></li>
      <li class="breadcrumb-item active"><span class="section-number">5.7. </span>Reducing CPU Usage with Orbbec ROS Package</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/source/5_advanced_guide/lower_cpu_usage.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="reducing-cpu-usage-with-orbbec-ros-package">
<h1><span class="section-number">5.7. </span>Reducing CPU Usage with Orbbec ROS Package<a class="headerlink" href="#reducing-cpu-usage-with-orbbec-ros-package" title="Link to this heading"></a></h1>
<p>This document outlines strategies for minimizing CPU usage in the <strong>OrbbecSDK_ROS1 v2</strong> environment when using <strong>Gemini 330 series cameras</strong>. The firmware version must be <strong>no lower than 1.4.10</strong>, and <code class="docutils literal notranslate"><span class="pre">device</span></code> should be set to <strong>Default</strong>.</p>
<section id="recommended-settings-for-lower-cpu-usage">
<h2><span class="section-number">5.7.1. </span>Recommended Settings for Lower CPU Usage<a class="headerlink" href="#recommended-settings-for-lower-cpu-usage" title="Link to this heading"></a></h2>
<p>To achieve the lowest possible CPU usage in OrbbecSDK_ROS1, it is recommended to configure the following parameters.</p>
<table border="1" class="docutils">
<thead>
<tr>
<th style="text-align: center;">Parameter</th>
<th style="text-align: center;">Recommendation</th>
<th style="text-align: center;">Note</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;"><code>uvc_backend</code></td>
<td style="text-align: center;"><code>v4l2</code></td>
<td style="text-align: center;">Lower CPU usage compared to <code>libuvc</code></td>
</tr>
<tr>
<td style="text-align: center;"><code>color_format</code></td>
<td style="text-align: center;"><code>RGB</code></td>
<td style="text-align: center;">Lower CPU usage than <code>MJPG</code></td>
</tr>
<tr>
<td style="text-align: center;"><code>filter</code></td>
<td style="text-align: center;">Only <code>hardware_noise_removal_filter</code></td>
<td style="text-align: center;">Other filters significantly increase CPU usage</td>
</tr>
</tbody>
</table></section>
<section id="launch-files-used-for-testing">
<h2><span class="section-number">5.7.2. </span>Launch Files Used for Testing<a class="headerlink" href="#launch-files-used-for-testing" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">gemini_330_lower_cpu_usage.launch</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">multi_camera_lower_cpu_usage.launch</span></code></p></li>
</ul>
</section>
<section id="test-environment">
<h2><span class="section-number">5.7.3. </span>Test environment<a class="headerlink" href="#test-environment" title="Link to this heading"></a></h2>
<section id="hardware-configuration">
<h3><span class="section-number">5.7.3.1. </span>Hardware Configuration<a class="headerlink" href="#hardware-configuration" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>CPU</strong>: Intel i7-8700 &#64; 3.20GHz</p></li>
<li><p><strong>Memory</strong>: 24 GB</p></li>
<li><p><strong>Storage</strong>: Micron 2200S NVMe 256GB</p></li>
<li><p><strong>GPU</strong>: NVIDIA GeForce GTX 1660Ti</p></li>
<li><p><strong>OS</strong>: Ubuntu20.04(Virtual Machines)</p></li>
</ul>
</section>
<section id="ros-configuration">
<h3><span class="section-number">5.7.3.2. </span>ROS Configuration<a class="headerlink" href="#ros-configuration" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>ROS Version</strong>: ROS1 Noetic</p></li>
<li><p><strong>SDK Version</strong>: OrbbecSDK_ROS1 v2.2.1</p></li>
</ul>
</section>
<section id="camera-setup">
<h3><span class="section-number">5.7.3.3. </span>Camera Setup<a class="headerlink" href="#camera-setup" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>Devices: 2x Gemini 335, 1x Gemini 336, 1x Gemini 336L</p></li>
<li><p>Firmware Version: 1.4.10</p></li>
</ul>
</section>
</section>
<section id="test-setup">
<h2><span class="section-number">5.7.4. </span>Test Setup<a class="headerlink" href="#test-setup" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p><strong>Stream Settings:</strong></p>
<ul>
<li><p>Depth / IR Left / IR Right: 848×480 &#64; 30fps</p></li>
<li><p>Color: 848×480 &#64; 15fps</p></li>
</ul>
</li>
</ul>
<p>Note: The following CPU usage data focuses on <code class="docutils literal notranslate"><span class="pre">uvc_backend</span></code>, <code class="docutils literal notranslate"><span class="pre">color_format</span></code> and various filter combinations.</p>
</section>
<section id="test-results">
<h2><span class="section-number">5.7.5. </span>Test Results<a class="headerlink" href="#test-results" title="Link to this heading"></a></h2>
</section>
<section id="uvc-backend-comparison-rgb-format">
<h2><span class="section-number">5.7.6. </span>uvc_backend Comparison (RGB format)<a class="headerlink" href="#uvc-backend-comparison-rgb-format" title="Link to this heading"></a></h2>
<table border="1" class="docutils">
<thead>
<tr>
<th style="text-align: center;">libuvc CPU Usage</th>
<th style="text-align: center;">v4l2 CPU Usage</th>
<th style="text-align: center;">Absolute Change</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">116.0%</td>
<td style="text-align: center;">45.7%</td>
<td style="text-align: center;">-70.3%</td>
</tr>
</tbody>
</table><p>The CPU usage can be significantly reduced with v4l2 backend. In our implementation, v4l2 works without requiring any patches to the Linux kernel, allowing users to easily switch between v4l2 and libuvc and maintaining full compatibility with standard Linux distributions.</p>
</section>
<section id="color-format-comparison-mjpg-vs-rgb">
<h2><span class="section-number">5.7.7. </span>color_format Comparison (MJPG vs RGB)<a class="headerlink" href="#color-format-comparison-mjpg-vs-rgb" title="Link to this heading"></a></h2>
<table border="1" class="docutils">
<thead>
<tr>
<th style="text-align: center;">Backend</th>
<th style="text-align: center;">MJPG CPU Usage</th>
<th style="text-align: center;">RGB CPU Usage</th>
<th style="text-align: center;">Absolute Change</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">libuvc</td>
<td style="text-align: center;">132.6%</td>
<td style="text-align: center;">116.0%</td>
<td style="text-align: center;">-16.6%</td>
</tr>
<tr>
<td style="text-align: center;">v4l2</td>
<td style="text-align: center;">56.0%</td>
<td style="text-align: center;">45.7%</td>
<td style="text-align: center;">-10.3%</td>
</tr>
</tbody>
</table><p>The CPU usage can be reduced if the RGB format is selected instead of MJPG, since the decoding of MJPG image will consume the host CPU resource.</p>
</section>
<section id="filter-configuration-impact">
<h2><span class="section-number">5.7.8. </span>Filter Configuration Impact<a class="headerlink" href="#filter-configuration-impact" title="Link to this heading"></a></h2>
<table border="1" class="docutils">
<thead>
<tr>
<th>Filters Applied</th>
<th>libuvc CPU Usage</th>
<th>CPU Usage Increase</th>
<th>v4l2 CPU Usage</th>
<th>CPU Usage Increase</th>
</tr>
</thead>
<tbody>
<tr>
<td>No Filter (benchmark)</td>
<td>116.0%</td>
<td>0.0%(benchmark)</td>
<td>45.7%</td>
<td>0.0%(benchmark)</td>
</tr>
<tr>
<td><code>(software)noise_removal_filter</code></td>
<td>148.2%</td>
<td>+32.2%</td>
<td>73.4%</td>
<td>+27.7%</td>
</tr>
<tr>
<td><code>(software)noise_removal_filter + spatial_filter</code></td>
<td>169.3%</td>
<td>+53.3%</td>
<td>93.3%</td>
<td>+47.6%</td>
</tr>
<tr>
<td><code>hardware_noise_removal_filter</code></td>
<td>115.7%</td>
<td>-0.3%</td>
<td>45.6%</td>
<td>-0.1%</td>
</tr>
<tr>
<td><code>hardware_noise_removal_filter + spatial_filter</code></td>
<td>124.5%</td>
<td>+8.5%</td>
<td>61.7%</td>
<td>+16.0%</td>
</tr>
</tbody>
</table><p>Based on the test results, using only the <code class="docutils literal notranslate"><span class="pre">hardware_noise_removal_filter</span></code> results in a negligible change in CPU usage for both <code class="docutils literal notranslate"><span class="pre">libuvc</span></code> (-0.3%) and <code class="docutils literal notranslate"><span class="pre">v4l2</span></code> (-0.1%) compared to the no-filter benchmark, as this filter runs internally on the camera hardware. In contrast, other filters execute on the host system. Adding the <code class="docutils literal notranslate"><span class="pre">spatial_filter</span></code> to the hardware filter leads to a moderate increase in CPU usage, while applying the software-based <code class="docutils literal notranslate"><span class="pre">noise_removal_filter</span></code> —either alone or combined with <code class="docutils literal notranslate"><span class="pre">spatial_filter</span></code> —significantly increases CPU load. To maintain low CPU usage, it is recommended to avoid software-based filters and rely solely on the <code class="docutils literal notranslate"><span class="pre">hardware_noise_removal_filter</span></code>.</p>
</section>
</section>
<section id="further-optimization">
<h1><span class="section-number">5.8. </span>Further Optimization<a class="headerlink" href="#further-optimization" title="Link to this heading"></a></h1>
<table border="1" class="docutils">
<thead>
<tr>
<th style="text-align: center;">Parameter</th>
<th style="text-align: center;">Recommendation</th>
<th style="text-align: center;">Note</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;"><code>depth_registration</code></td>
<td style="text-align: center;"><code>false</code> or <code>true</code> with <code>align_mode=HW</code></td>
<td style="text-align: center;">Software alignment consumes more CPU</td>
</tr>
<tr>
<td style="text-align: center;"><code>enable_point_cloud</code></td>
<td style="text-align: center;"><code>false</code></td>
<td style="text-align: center;">Disabling point cloud reduces CPU usage</td>
</tr>
<tr>
<td style="text-align: center;"><code>enable_colored_point_cloud</code></td>
<td style="text-align: center;"><code>false</code></td>
<td style="text-align: center;">Disabling colored point cloud reduces CPU usage</td>
</tr>
</tbody>
</table></section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="interleave_ae_mode.html" class="btn btn-neutral float-left" title="5.6. Using interleave_ae with Gemini330 series cameras" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="multi_camera.html" class="btn btn-neutral float-right" title="5.9. Using Multiple Cameras with the Orbbec ROS Package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, ORBBEC INC. www.orbbec.com..
      <span class="lastupdated">Last updated on 2025-09-15 06:14:28.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>